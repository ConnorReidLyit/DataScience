 library(dplyr) library(reshape2) library(readr) library(ggplot2)
enerate an output file here. Can anybody explain why? Thanks! install.packages('dplyr') install.packages('reshape2') install.packages('readr') install.packages('ggplot2') library(dplyr) library(reshape2) library(readr) library(ggplot2)
data <- read_csv("../input/train.csv.zip")
data <- read_csv("../input/train.csv.zip")
data <- read_csv("../input/train.csv.zip")
data <- read_csv("../input/train.csv.zip")
data <- read_csv("../input/train.csv.zip")
data <- read_csv("../input/train.csv")
setwd("C:/Users/Connor/Documents/MSc Computing in Big Data Analytics/Data Science/CA")
list.files()
data <- read_csv("train.csv")
str(data)
data <- read.csv("train.csv")
setwd("C:/Users/Connor/Documents/MSc Computing in Big Data Analytics/Data Science/CA")
list.files()
rm(data)
data <- read.csv("train.csv")
str(data)
# Plot crimes by district crimes_by_district_plot <- table(data$Category, data$PdDistrict) crimes_by_district_plot <- melt(crimes_by_district_plot) names(crimes_by_district_plot) <- c("Category", "PdDistrict", "Count")
g <- ggplot(crimes_by_district_plot, aes(x = Category, y = Count, fill = Category)) +   geom_bar(stat = "Identity") +   coord_flip() +   facet_grid(. ~ PdDistrict) +   theme(legend.position = "none") ggsave(g, file = "Crimes_by_district.png", width = 20, height = 8)
ggplot(g, file = "Crimes_by_district.png", width = 20, height = 8)
plot(g, file = "Crimes_by_district.png", width = 20, height = 8)
 district crimes_by_district <- table(data$PdDistrict, data$Category)
# Build a contingecy table: count of each crime category for each district crimes_by_district <- table(data$PdDistrict, data$Category)
crimes_by_district
crimes_by_district_norm <- t(scale(t(crimes_by_district), center = FALSE, scale = colSums(t(crimes_by_district)))) # save as a data frame
# save as a data frame crimes_by_district_norm <- as.data.frame.matrix(crimes_by_district_norm)
crimes_by_district_norm <- round(crimes_by_district_norm, digits = 4)
crimes_by_district_norm$PdDistrict <- rownames(crimes_by_district_norm)
test <- read_csv("test.csv")
rm(test)
test <- read.csv("test.csv")
# Only retain the Id and the PdDistrict submission <- subset(test, select = c("Id", "PdDistrict")) # Merge the test data with the normalized crimes_by_district submission <- merge(submission, crimes_by_district_norm, by = "PdDistrict") # Drop the PdDistrict column submission$PdDistrict <- NULL
# Only retain the Id and the PdDistrict submission <- subset(test, select = c("Id", "PdDistrict")) # Merge the test data with the normalized crimes_by_district submission <- merge(submission, crimes_by_district_norm, by = "PdDistrict") # Drop the PdDistrict column submission$PdDistrict <- NULL # Remove variables from the workspace to create enough space to create the submission file rm(data) rm(crimes_by_district) rm(crimes_by_district_norm) rm(test)
head(submission)
colnames(submission> colnames(submission))
colnames(submission)
colnames(submission)[30] <- "SEX OFFENSES FORCIBLE"
colnames(submission)[31] <- "SEX OFFENSES NON FORCIBLE"
names(submission)
gz_out <- gzfile("submit.csv.gz", "w") writeChar(write_csv(submission, ""), gz_out, eos = NULL) close(gz_out) dir()
write.csv(submission, file = "Based_on_PdDistrict.csv", row.names=FALSE,quote=FALSE) write_csv(submission, "Based_on_PdDistrict.csv") file.info("Based_on_PdDistrict.csv")$size
